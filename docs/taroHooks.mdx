---
title: taroHooks
---

对 Taro 专有 Hooks 进行包装

taro 3.0 rc 版本专有 hooks 存在依赖更新问题, 一旦依赖更新, 新的回调会被合并到数组中, 下次调用时新旧回调一起调用. 如果不传依赖, 回调函数会停留在第一次传入的值不再更新.

## 用法

```jsx
import { useState } from 'react'
import { useReachBottom } from '@tarojsx/hooks'

const Demo = () => {
    const [page, setPage] = useState(0)

    useReachBottom(() => {
        console.log(page)
        setPage((prev) => prev + 1)
    })
}

// 0
// 1
// 2
```

```jsx {4} title="不更新错误示范.jsx"
const IssueDemo = () => {
    const [page, setPage] = useState(0)

    Taro.useReachBottom(() => {
        console.log(page)
        setPage((prev) => prev + 1)
    })
}

// 0
// 0
// 0
```

```jsx {4} title="重复调用错误示范.jsx"
const IssueDemo2 = () => {
    const [page, setPage] = useState(0)

    Taro.useReachBottom(() => {
        console.log(page)
        setPage((prev) => prev + 1)
    }, [page])
}

// 0
// 0,1
// 0,1,2
```
